# âš¡ 5åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²æŒ‡å—

## æœ€ç®€å•çš„æ–¹æ¡ˆï¼šä½¿ç”¨äº‘æœåŠ¡å™¨

### å‡†å¤‡å·¥ä½œï¼ˆ10åˆ†é’Ÿï¼‰
1. **è´­ä¹°æœåŠ¡å™¨**
   - æŽ¨èï¼šé˜¿é‡Œäº‘ã€è…¾è®¯äº‘
   - é…ç½®ï¼š2æ ¸2Gï¼Œ40GBç¡¬ç›˜
   - ç³»ç»Ÿï¼šUbuntu 22.04
   - è´¹ç”¨ï¼šçº¦Â¥100/æœˆ

2. **èŽ·å–æœåŠ¡å™¨ä¿¡æ¯**
   - IPåœ°å€ï¼š`123.456.789.0`
   - ç”¨æˆ·åï¼š`root`
   - å¯†ç ï¼šè´­ä¹°æ—¶è®¾ç½®çš„å¯†ç 

---

## ä¸€é”®éƒ¨ç½²è„šæœ¬

### æ­¥éª¤1ï¼šè¿žæŽ¥æœåŠ¡å™¨
```bash
ssh root@your-server-ip
```

### æ­¥éª¤2ï¼šè¿è¡Œä¸€é”®éƒ¨ç½²è„šæœ¬
å¤åˆ¶ä»¥ä¸‹å‘½ä»¤ï¼Œåœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
# 1. æ›´æ–°ç³»ç»Ÿ
apt update && apt upgrade -y

# 2. å®‰è£…Node.js
curl -fsSL https://deb.nodesource.com/setup_18.x | bash -
apt install -y nodejs

# 3. å®‰è£…Nginxå’ŒPM2
apt install -y nginx git
npm install -g pm2

# 4. ä¸‹è½½é¡¹ç›®ï¼ˆæ–¹æ³•Aï¼šä½¿ç”¨Gitï¼‰
cd /var/www
git clone https://github.com/yourusername/xiezuoCalendar.git
cd xiezuoCalendar/backend
npm install --production

# æˆ–è€…ï¼ˆæ–¹æ³•Bï¼šä¸Šä¼ æœ¬åœ°æ–‡ä»¶ï¼‰
# åœ¨æœ¬åœ°ç”µè„‘è¿è¡Œï¼šscp -r e:\Work\xiezuoCalendar root@your-server-ip:/var/www/

# 5. é…ç½®çŽ¯å¢ƒå˜é‡
cat > /var/www/xiezuoCalendar/backend/.env << EOF
NODE_ENV=production
PORT=3000
JWT_SECRET=$(node -e "console.log(require('crypto').randomBytes(32).toString('hex'))")
DEEPSEEK_API_KEY=sk-your-api-key-here
EOF

# 6. å¯åŠ¨åº”ç”¨
cd /var/www/xiezuoCalendar/backend
pm2 start src/index.js --name calendar
pm2 startup
pm2 save

# 7. é…ç½®Nginx
cat > /etc/nginx/sites-available/calendar << 'EOF'
server {
    listen 80;
    server_name _;

    location / {
        root /var/www/xiezuoCalendar;
        try_files $uri $uri/ /installation_schedule.html;
        index installation_schedule.html;
    }

    location /frontend/ {
        alias /var/www/xiezuoCalendar/frontend/;
    }

    location /api/ {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    location /socket.io/ {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
EOF

ln -s /etc/nginx/sites-available/calendar /etc/nginx/sites-enabled/
nginx -t && systemctl reload nginx

# 8. é…ç½®é˜²ç«å¢™
ufw allow ssh
ufw allow 'Nginx Full'
ufw --force enable

echo "================================"
echo "éƒ¨ç½²å®Œæˆï¼"
echo "è®¿é—®åœ°å€: http://$(curl -s ifconfig.me)"
echo "é»˜è®¤è´¦å·: admin / 12345"
echo "================================"
```

---

## å¦‚æžœä½¿ç”¨æœ¬åœ°æ–‡ä»¶ä¸Šä¼ 

### åœ¨Windowsæœ¬åœ°ç”µè„‘è¿è¡Œï¼š
```powershell
# åŽ‹ç¼©é¡¹ç›®
Compress-Archive -Path "e:\Work\xiezuoCalendar" -DestinationPath "calendar.zip"

# ä½¿ç”¨WinSCPä¸Šä¼ åˆ°æœåŠ¡å™¨
# æˆ–ä½¿ç”¨å‘½ä»¤è¡Œï¼ˆéœ€è¦å…ˆå®‰è£…OpenSSHï¼‰
scp calendar.zip root@your-server-ip:/var/www/
```

### åœ¨æœåŠ¡å™¨è§£åŽ‹ï¼š
```bash
cd /var/www
unzip calendar.zip
cd xiezuoCalendar/backend
npm install --production
```

---

## æ·»åŠ åŸŸåï¼ˆå¯é€‰ï¼Œ5åˆ†é’Ÿï¼‰

### 1. è´­ä¹°åŸŸå
åœ¨é˜¿é‡Œäº‘/è…¾è®¯äº‘è´­ä¹°åŸŸåï¼ˆçº¦Â¥55/å¹´ï¼‰

### 2. æ·»åŠ DNSè§£æž
```
ç±»åž‹: A
ä¸»æœºè®°å½•: @
è®°å½•å€¼: your-server-ip
```

### 3. é…ç½®HTTPSï¼ˆå…è´¹è¯ä¹¦ï¼‰
```bash
# å®‰è£…Certbot
apt install -y certbot python3-certbot-nginx

# èŽ·å–è¯ä¹¦ï¼ˆæ›¿æ¢yourdomain.comï¼‰
certbot --nginx -d yourdomain.com -d www.yourdomain.com

# è¾“å…¥é‚®ç®±ï¼ŒåŒæ„æ¡æ¬¾å³å¯
```

å®ŒæˆåŽè‡ªåŠ¨é…ç½®HTTPSï¼Œè®¿é—® `https://yourdomain.com`

---

## ç»´æŠ¤å‘½ä»¤

### æŸ¥çœ‹åº”ç”¨çŠ¶æ€
```bash
pm2 status
pm2 logs calendar
```

### é‡å¯åº”ç”¨
```bash
pm2 restart calendar
```

### æ›´æ–°ä»£ç 
```bash
cd /var/www/xiezuoCalendar
git pull
pm2 restart calendar
```

### å¤‡ä»½æ•°æ®
```bash
tar -czf backup-$(date +%Y%m%d).tar.gz /var/www/xiezuoCalendar/backend/data
```

---

## å¸¸è§é—®é¢˜

### 1. æ— æ³•è®¿é—®ï¼Ÿ
```bash
# æ£€æŸ¥æœåŠ¡
pm2 status
systemctl status nginx

# æ£€æŸ¥é˜²ç«å¢™
ufw status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs calendar
tail -f /var/log/nginx/error.log
```

### 2. ä¿®æ”¹APIå¯†é’¥ï¼Ÿ
```bash
nano /var/www/xiezuoCalendar/backend/.env
# ä¿®æ”¹ DEEPSEEK_API_KEY
pm2 restart calendar
```

### 3. ä¿®æ”¹å¯†ç ï¼Ÿ
```bash
# ç”ŸæˆåŠ å¯†å¯†ç 
cd /var/www/xiezuoCalendar/backend
node -e "const bcrypt = require('bcryptjs'); console.log(bcrypt.hashSync('æ–°å¯†ç ', 10));"

# ç¼–è¾‘æ•°æ®åº“æ–‡ä»¶
nano src/db.js
# æ›¿æ¢passwordå­—æ®µ

pm2 restart calendar
```

---

## è´¹ç”¨è¯´æ˜Ž

### äº‘æœåŠ¡å™¨æ–¹æ¡ˆ
- **æœåŠ¡å™¨**: Â¥80-100/æœˆï¼ˆé˜¿é‡Œäº‘/è…¾è®¯äº‘æ–°ç”¨æˆ·ä¼˜æƒ ï¼‰
- **åŸŸå**: Â¥55/å¹´ï¼ˆå¯é€‰ï¼‰
- **SSLè¯ä¹¦**: å…è´¹ï¼ˆLet's Encryptï¼‰
- **æ€»è®¡**: é¦–å¹´çº¦Â¥1000-1200

### å…è´¹æ–¹æ¡ˆï¼ˆVercelï¼‰
```bash
# å®‰è£…Vercel CLI
npm install -g vercel

# éƒ¨ç½²
cd e:\Work\xiezuoCalendar
vercel

# è·Ÿéšæç¤ºå®Œæˆéƒ¨ç½²
# è®¿é—®: https://your-project.vercel.app
```

---

## æŽ¨èé…ç½®

### å°å›¢é˜Ÿï¼ˆ<20äººï¼‰
- äº‘æœåŠ¡å™¨ï¼š2æ ¸2G
- å¸¦å®½ï¼š3Mbps
- è´¹ç”¨ï¼šÂ¥100/æœˆ

### ä¸­åž‹å›¢é˜Ÿï¼ˆ20-50äººï¼‰
- äº‘æœåŠ¡å™¨ï¼š2æ ¸4G
- å¸¦å®½ï¼š5Mbps
- è´¹ç”¨ï¼šÂ¥150/æœˆ

### å¤§åž‹å›¢é˜Ÿï¼ˆ50+äººï¼‰
- äº‘æœåŠ¡å™¨ï¼š4æ ¸8G
- å¸¦å®½ï¼š10Mbps
- æ•°æ®åº“ï¼šç‹¬ç«‹RDS
- è´¹ç”¨ï¼šÂ¥300+/æœˆ

---

## ä¸‹ä¸€æ­¥

éƒ¨ç½²å®ŒæˆåŽï¼š
1. âœ… ä¿®æ”¹é»˜è®¤å¯†ç 
2. âœ… é…ç½®HTTPSï¼ˆå¦‚æœ‰åŸŸåï¼‰
3. âœ… è®¾ç½®è‡ªåŠ¨å¤‡ä»½
4. âœ… é€šçŸ¥å›¢é˜Ÿä½¿ç”¨

**éœ€è¦è¯¦ç»†æŒ‡å—ï¼Ÿ** æŸ¥çœ‹ `éƒ¨ç½²æŒ‡å—.md`

**é‡åˆ°é—®é¢˜ï¼Ÿ** 
- æŸ¥çœ‹æ—¥å¿—ï¼š`pm2 logs calendar`
- æ£€æŸ¥Nginxï¼š`systemctl status nginx`
- æµ‹è¯•ç«¯å£ï¼š`curl http://localhost:3000`

---

**éƒ¨ç½²æˆåŠŸï¼ðŸŽ‰**
